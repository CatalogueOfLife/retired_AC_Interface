<?php
/**
 * Annual Checklist Interface
 *
 * tree.phtml
 * Browse tree view
 *
 * @category    ACI
 * @package     application
 * @subpackage  views/scripts
 *
 */
?>
<p class="page_header"><?php echo $this->translate('Browse_taxonomic_tree'); ?></p>
<?php
echo '<script type="text/javascript">';
echo 'var baseUrl = "' . $this->baseUrl() . '";';
echo 'var hierarchy = new Array(' . $this->hierarchy . ');';
echo '</script>';
?>
<script type="text/javascript">
init = function() {
    var store = new dojox.data.QueryReadStore({ url: baseUrl + '/browse/tree/fetch/taxa' });
    var model = new ACI.dojo.TxStoreModel({
        store: store,
        query: { id: 0 },
        id: 'tree',
        labelAttr: 'name',
        rootLabel: '',
        typeAttr:'type',
        childrenAttr: 'children'
    }, 'store');
    var tree = new ACI.dojo.TxTree({ model: model }, 'tree');
    tree.persist = false;
}
dojo.addOnLoad(init);
</script>
<div id="tree"></div>