<?php 
$order_arrow = '<img src="' . $this->baseUrl() . '/images/' .
(isset($this->urlParams['order']) && $this->urlParams['order'] == 'desc' ?
    'Arrow_up.gif' : 'Arrow_down.gif') .
'" alt="' .
(isset($this->urlParams['order']) && $this->urlParams['order'] == 'desc' ?
    $this->translate('ascending') :
    $this->translate('descending')
) .
'" />';

$order = array(
    'name' => 'asc',
    'rank' => 'asc',
    'status' => 'asc',
    'group' => 'asc',
    'db' => 'asc'
);
if(isset($this->sort) && isset($this->urlParams['order']) &&
    $this->urlParams['order'] == 'asc')
{
    $order[$this->sort] = 'desc';
}
?>

<table class="results">
<?php $rowClass = "odd"; ?>
    <tr class="even">
        <th class="horizontal<?php echo ($this->sort == 'name' ? " current" : "");?>">
        <a href="<?php echo $this->url(array_merge($this->urlParams, array(
          'sort' => 'name', 'order' => $order['name']))); ?>"><?php echo $this->translate('Name'); ?>
          <?php echo ($this->sort == 'name' ? $order_arrow : "");?>
          </a>
        </th>
        <th class="horizontal<?php echo ($this->sort == 'rank' ? " current" : "");?>">
        <a href="<?php echo $this->url(array_merge($this->urlParams, array(
          'sort' => 'rank', 'order' => $order['rank']))); ?>"><?php echo $this->translate('Rank'); ?>
          <?php echo ($this->sort == 'rank' ? $order_arrow : "");?>
          </a>
        </th>
        <th class="horizontal<?php echo ($this->sort == 'status' ? " current" : "");?>">
        <a href="<?php echo $this->url(array_merge($this->urlParams, array(
          'sort' => 'status', 'order' => $order['status']))); ?>"><?php echo $this->translate('Name_status'); ?>
          <?php echo ($this->sort == 'status' ? $order_arrow : "");?>
        </a></th>
        <th class="horizontal<?php echo ($this->sort == 'group' ? " current" : "");?>">
        <a href="<?php echo $this->url(array_merge($this->urlParams, array(
          'sort' => 'group', 'order' => $order['group']))); ?>"><?php echo $this->translate('Group'); ?>
          <?php echo ($this->sort == 'group' ? $order_arrow : "");?>
        </a></th>
        <th class="horizontal<?php echo ($this->sort == 'db' ? " current" : "");?>">
        <a href="<?php echo $this->url(array_merge($this->urlParams, array(
          'sort' => 'db', 'order' => $order['db']))); ?>"><?php echo $this->translate('Database'); ?>
          <?php echo ($this->sort == 'db' ? $order_arrow : "");?>
        </a></th>
        <th class="horizontal"> </th>
    </tr>
<?php foreach ($this->data as $row): ?>
    <tr class="<?php echo $rowClass; ?>">
        <td class="field_header_black">
            <a href="<?php echo $this->baseUrl() . $row['url']; ?>">
                <?php echo $row['name']; ?>
            </a>
        </td>
        <td class="field_header_black">
            <a href="<?php echo $this->baseUrl() . $row['url']; ?>">
                <?php echo $row['rank']; ?>
            </a>
        </td>
        <td><?php echo $row['status']; ?></td>
        <td><?php echo $row['group']; ?></td>
        <td>
<?php if($row['dbLabel'] != ""): ?>
        <div class="wrapLogo">
        <a href="<?php echo $this->baseUrl() . $row['dbUrl']; ?>">
        <img
          src="<?php echo $this->baseUrl() . $row['dbLogo']; ?>"
          alt="<?php echo $row['dbLabel']; ?>"
          title="<?php echo $row['dbLabel']; ?>" /></a></div>
<?php endif; ?>
        </td>
    </tr>
<?php $rowClass = ($rowClass == "odd" ? "even" : "odd");?>
<?php endforeach; ?>
</table>